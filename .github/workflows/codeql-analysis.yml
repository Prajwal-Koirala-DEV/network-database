# Workflow name: CodeQL Analysis for Go Application
name: "CodeQL Analysis"  

on:
    # Trigger the workflow on push or pull_request events.
    - push  # Trigger on any push event.
    - pull_request  # Trigger on pull requests.

jobs:
  # Job name: Analyze the repository using CodeQL.
  analyse:
    name: Run CodeQL Analysis  
    # The job will run on an Ubuntu runner.
    runs-on: ubuntu-latest  

    steps:
      # Step 1: Checkout the repository to get the latest code.
      - name: Checkout Repository
        uses: actions/checkout@v4  # Use the GitHub checkout action to pull down the latest code.

      # Step 2: Initialize the CodeQL analysis with the Go language.
      - name: Initialize CodeQL for Go
        uses: github/codeql-action/init@v3  # Initializes CodeQL for the repository.
        with:
          # Specify the language to analyze (Go in this case).
          languages: go  

      # Step 3: Perform an auto-build of the code if necessary.
      - name: Autobuild the Go Application
        uses: github/codeql-action/autobuild@v3  # Automatically build the Go application if needed for analysis.

      # Step 4: Run the CodeQL analysis on the repository code.
      - name: Perform CodeQL Analysis
        uses: github/codeql-action/analyze@v3  # Run the actual CodeQL analysis on the repository's code.
